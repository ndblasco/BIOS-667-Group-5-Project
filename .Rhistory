twstrs~"{mean} ({sd})")) |>
add_p() |>
modify_footnote(
all_stat_cols() ~ c("TWSTRS = Toronto Western Spasmodic Torticollis Rating Scale",
"BotB=botulinum toxin type B")
abbreviation = TRUE
tbl <- cdystonia_wk0 |>
tbl_summary(by = trt,
include = c(sexc, age,twstrs),
type=all_continuous()~"continuous2",
label = list(sexc = "Sex",age~"Age (years)",twstrs="TWSTRS total score at baseline"),
statistic = list(
age ~ c(
"{N_obs}",
"{mean} ({sd})",
"{median}",
"{min}, {max}"),
all_categorical() ~ "{n} ({p}%)",
twstrs~"{mean} ({sd})")) |>
add_p() |>
modify_footnote(
all_stat_cols() ~ c("TWSTRS = Toronto Western Spasmodic Torticollis Rating Scale",
"BotB=botulinum toxin type B"),
abbreviation = TRUE
) |>
modify_spanning_header(all_stat_cols() ~ "**BotB**")
cdystonia <- cdystonia %>% mutate(
trt = case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male"))
# Load packages
suppressPackageStartupMessages({
library(haven) # for reading in data
library(dplyr) # for manipulating data
library(gtsummary) # for making table 1
library(cards)
library(kableExtra)
library(huxtable) # for styling tables
})
# Read the SPSS file
cdystonia <- read_dta("/Users/laurenrackley/Downloads/cdystonia.dta")
# Inspect data
#head(cdystonia)
cdystonia <- cdystonia %>% mutate(
trt = case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male"))
# Filter to only week 0
cdystonia_wk0 <- cdystonia %>%
filter(week == 0)
tbl <- cdystonia_wk0 |>
tbl_summary(by = trt,
include = c(sexc, age,twstrs),
type=all_continuous()~"continuous2",
label = list(sexc = "Sex",age~"Age (years)",twstrs="TWSTRS total score at baseline"),
statistic = list(
age ~ c(
"{N_obs}",
"{mean} ({sd})",
"{median}",
"{min}, {max}"),
all_categorical() ~ "{n} ({p}%)",
twstrs~"{mean} ({sd})")) |>
add_p() |>
modify_footnote(
all_stat_cols() ~ c("TWSTRS = Toronto Western Spasmodic Torticollis Rating Scale",
"BotB=botulinum toxin type B"),
abbreviation = TRUE
) |>
modify_spanning_header(all_stat_cols() ~ "**BotB**")
cdystonia <- read_dta("Data/cdystonia.dta")
View(cdystonia)
show_header_names(tbl)
show_header_names(tbl)
show_header_names(tbl)
tbl <- cdystonia_wk0 |>
tbl_summary(by = trt,
include = c(sexc, age,twstrs),
type=all_continuous()~"continuous2",
label = list(sexc = "Sex",age~"Age (years)",twstrs="TWSTRS total score at baseline"),
statistic = list(
age ~ c(
"{N_obs}",
"{mean} ({sd})",
"{median}",
"{min}, {max}"),
all_categorical() ~ "{n} ({p}%)",
twstrs~"{mean} ({sd})")) |>
add_overall() |>
add_p(pvalue_fun = ~style_sigfig(., digits = 4)) |>
modify_footnote(
all_stat_cols() ~
"BotB = botulinum toxin type B;TWSTRS = Toronto Western Spasmodic Torticollis Rating Scale.",
abbreviation = TRUE
)
show_header_names(tbl)
?modify_spanning_header
show_header_names(tbl)
View(cdystonia)
library(tidyr) # for reshaping data
cdystonia_wide <- cdystonia %>%
pivot_wider(
id_cols = c(id, trt, age, sexc),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
cdystonia_wide <- cdystonia %>%
pivot_wider(
id_cols = c(id, treat, age, sex),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
View(cdystonia_wide)
View(cdystonia)
View(cdystonia)
ten_subjects_wide <- cdystonia_wide %>%
head(10)
View(ten_subjects_wide)
View(cdystonia_wide)
install.packages("gtreg")
library(gtreg)
install.packages("gtsummary")
library(gtreg) # for making tables
View(cdystonia)
tbl_listing_ex2 <-
cdystonia_wide %>%
dplyr::slice_sample(n = 10) %>%
select(id, treat, age, sex,twstrs_2,twstrs_4,twstrs_8,twstrs_10,twstrs_12,twstrws_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
tbl_listing_ex2 <-
cdystonia_wide %>%
dplyr::slice_sample(n = 10) %>%
select(id, treat, age, sex,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrws_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
tbl_listing_ex2 <-
cdystonia_wide %>%
dplyr::slice_sample(n = 10) %>%
select(id, treat, age, sex,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
as_kable_extra(tbl2,
booktabs=TRUE,
longtable=TRUE,
linesep="",
caption = "TWSTRS Scores at weeks 2,4,8,12,16 from 107 patients with CD, first 10 subjects")
tbl2 <-
cdystonia_wide %>%
dplyr::slice_sample(n = 10) %>%
select(id, treat, age, sex,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
as_kable_extra(tbl2,
booktabs=TRUE,
longtable=TRUE,
linesep="",
caption = "TWSTRS Scores at weeks 2,4,8,12,16 from 107 patients with CD, first 10 subjects")
tbl2 <-
cdystonia_wide %>%
dplyr::slice_sample(n = 10) %>%
select(id, treat, age, sex,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
tbl2
tbl2 <-
ten_subjects_wide %>%
select(id, treat, age, sex,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
tbl2
ten_subjects_wide <- cdystonia_wide %>%
trt = case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
ten_subjects_wide <- cdystonia_wide %>% mutate(
trt = case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male")) %>%
head(10)
ten_subjects_wide <- cdystonia_wide %>% dplyr::mutate(
trt = case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male")) %>%
head(10)
ten_subjects_wide <- cdystonia_wide %>% dplyr::mutate(
trt = dplyr::case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male")) %>%
head(10)
ten_subjects_wide <- cdystonia_wide %>% dplyr::mutate(
trt = dplyr::case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = dplyr::case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male")) %>%
head(10)
View(cdystonia_wide)
View(cdystonia_wide)
ten_subjects_wide <- cdystonia_wide %>% dplyr::mutate(
trt = dplyr::case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = dplyr::case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male")) %>%
head(10)
ten_subjects_wide <- cdystonia_wide %>% dplyr::mutate(
treat_num = as.numeric(treat),
trt = dplyr::case_when(
treat_num == 1 ~ "10000U",
treat_num == 2 ~ "5000U",
treat_num == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = dplyr::case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male")) %>%
head(10)
str(cdystonia_wide)
str(cdystonia)
View(cdystonia_wide)
ten_subjects_wide <- cdystonia_wide %>% dplyr::mutate(
trt = dplyr::case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
sexc = dplyr::case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male")) %>%
head(10)
rlang::last_trace()
ten_subjects_wide <- cdystonia_wide %>%
head(10)
tbl2 <-
ten_subjects_wide %>%
select(id, treat, age, sex,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
tbl2
View(ten_subjects_wide)
str(ten_subjects_wide)
cdystonia_wide <- cdystonia %>%
pivot_wider(
id_cols = c(id, trt, age, sexc),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
cdystonia_wide <- cdystonia %>%
dplyr::pivot_wider(
id_cols = c(id, trt, age, sexc),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
cdystonia <- cdystonia %>% mutate(
trt = case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male"))
cdystonia <- cdystonia %>% dplyr::mutate(
trt = case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male"))
cdystonia <- cdystonia %>% dplyr::mutate(
trt = dplyr::case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = dplyr::case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male"))
cdystonia <- read_dta("Data/cdystonia.dta") # mapping to Data folder in GitHub repo
suppressPackageStartupMessages({
library(haven) # for reading in data
library(dplyr) # for manipulating data
library(gtsummary) # for making table 1
library(cards)
library(kableExtra)
library(huxtable) # for styling tables
library(tidyr) # for reshaping data
library(gtreg) # for making tables
})
# Read in data
cdystonia <- read_dta("Data/cdystonia.dta") # mapping to Data folder in GitHub repo
# Inspect data
head(cdystonia)
cdystonia <- cdystonia %>% dplyr::mutate(
trt = dplyr::case_when(
treat == 1 ~ "10000U",
treat == 2 ~ "5000U",
treat == 3 ~ "Placebo"
),
trt = factor(trt, levels = c("Placebo", "5000U", "10000U")),
sexc = dplyr::case_when(
sex == 1 ~ "Female",
sex == 2 ~ "Male"))
cdystonia_wide <- cdystonia %>%
dplyr::pivot_wider(
id_cols = c(id, trt, age, sexc),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
View(cdystonia)
cdystonia_wide <- cdystonia %>%
pivot_wider(
id_cols = c(id, trt, age, sexc),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
cdystonia %>%
dplyr::summarise(n = dplyr::n(), .by = c(id, trt, age, sexc, week)) %>%
dplyr::filter(n > 1L)
View(cdystonia)
cdystonia %>%
dplyr::summarise(n = dplyr::n(), .by = c(id, trt, age, sexc, week)) %>%
dplyr::filter(n > 1L)
View(cdystonia)
cdystonia %>%
dplyr::summarise(n = dplyr::n(), .by = c(id, trt, age, sexc, week)) %>%
dplyr::filter(n > 1L)
View(cdystonia)
cdystonia_wide <- cdystonia %>%
pivot_wider(
id_cols = c(id, trt, age, sexc),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
View(cdystonia_wide)
cdystonia_wide <- cdystonia %>%
pivot_wider(
id_cols = c(id, trt, site, age, sexc),
names_from = week,
values_from = twstrs,
names_prefix = "twstrs_"
)
ten_subjects_wide <- cdystonia_wide %>%
head(10)
tbl2 <-
ten_subjects_wide %>%
select(id, trt, age, sexc,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing() %>%
as_gt() %>%
gt::opt_row_striping()
tbl2
ten_subjects_wide %>%
select(id, trt, age, sexc,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing(label=
trt="Group",
tbl2 <-
ten_subjects_wide %>%
select(id, trt, age, sexc,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing(label=list(
trt="Group",
age="Age (years)",
sexc="Sex",
twstrs_2="Week 2",
twstrs_4="Week 4",
twstrs_8="Week 8",
twstrs_12="Week 12",
twstrs_16="Week 16"
))%>%
as_gt() %>%
gt::opt_row_striping()
ten_subjects_wide %>%
select(id, trt, age, sexc,twstrs_2,twstrs_4,twstrs_8,twstrs_12,twstrs_16) %>%
tbl_listing(label=
list(
trt="Group",
age="Age (years)",
sexc="Sex",
twstrs_2="Week 2",
twstrs_4="Week 4",
twstrs_8="Week 8",
twstrs_12="Week 12",
twstrs_16="Week 16"
)
)%>%
as_gt() %>%
gt::opt_row_striping()
tbl2 <-
ten_subjects_wide %>%
dplyr::select(id, trt, age, sexc, twstrs_2, twstrs_4, twstrs_8, twstrs_12, twstrs_16) %>%
# 1. Create the gtsummary listing object
tbl_listing() %>%
# 2. Modify the column headers using modify_header()
modify_header(
id = "**Subject ID**",
trt = "**Treatment Group**",
age = "**Age (years)**",
sexc = "**Sex**",
twstrs_2 = "**Week 2 Score**",
twstrs_4 = "**Week 4 Score**",
twstrs_8 = "**Week 8 Score**",
twstrs_12 = "**Week 12 Score**",
twstrs_16 = "**Week 16 Score**"
) %>%
# 3. Convert to gt and apply final formatting
as_gt() %>%
gt::opt_row_striping()
tbl2
tbl2 <-
ten_subjects_wide %>%
dplyr::select(id, trt, age, sexc, twstrs_2, twstrs_4, twstrs_8, twstrs_12, twstrs_16) %>%
# 1. Create the gtsummary listing object
tbl_listing() %>%
# 2. Modify the column headers using modify_header()
modify_header(
id = "**Subject ID**",
trt = "**Treatment Group**",
age = "**Age (years)**",
sexc = "**Sex**",
twstrs_2 = "**Week 2 Score**",
twstrs_4 = "**Week 4 Score**",
twstrs_8 = "**Week 8 Score**",
twstrs_12 = "**Week 12 Score**",
twstrs_16 = "**Week 16 Score**"
) %>%
# 3. Convert to gt and apply final formatting
as_gt() %>%
gt::tab_header(title="Table 2. TWSTRS scores for 109 patients with CD at weeks 2,4,8,12,16") %>%
gt::opt_row_striping()
tbl2
tbl2 <-
ten_subjects_wide %>%
dplyr::select(id, trt, age, sexc, twstrs_2, twstrs_4, twstrs_8, twstrs_12, twstrs_16) %>%
# 1. Create the gtsummary listing object
tbl_listing() %>%
# 2. Modify the column headers using modify_header()
modify_header(
id = "**Subject ID**",
trt = "**Group**",
age = "**Age**",
sexc = "**Sex**",
twstrs_2 = "**Week 2**",
twstrs_4 = "**Week 4**",
twstrs_8 = "**Week 8**",
twstrs_12 = "**Week 12**",
twstrs_16 = "**Week 16**"
) %>%
# 3. Convert to gt and apply final formatting
as_gt() %>%
gt::tab_header(title="Table 2. TWSTRS scores for 109 patients with CD at weeks 2,4,8,12,16") %>%
gt::opt_row_striping()
tbl2
View(cdystonia)
